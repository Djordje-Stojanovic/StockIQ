# Story 1.1: Project Setup & FastAPI Foundation

## Status
Approved

## Story
**As a** developer,
**I want** a complete FastAPI project structure with essential configuration,
**so that** I have a solid foundation for implementing the assessment and research agents.

## Acceptance Criteria
1. FastAPI application initializes with health check endpoint
2. Project structure includes agents/, api/, templates/, static/ directories
3. Environment configuration supports OpenAI API key management
4. Basic CORS and middleware configuration for local development
5. Requirements.txt includes minimal dependencies (FastAPI, OpenAI SDK, Pydantic, weasyprint)
6. Application runs locally on Windows 11 with simple startup command

## Tasks / Subtasks
- [ ] Create FastAPI application entry point (AC: 1)
  - [ ] Initialize FastAPI app in src/main.py
  - [ ] Implement health check endpoint at /health
  - [ ] Configure basic CORS middleware for local development
  - [ ] Add startup/shutdown event handlers
- [ ] Establish project directory structure (AC: 2)
  - [ ] Create src/ directory with all required subdirectories
  - [ ] Create agents/ directory for AI agent implementations
  - [ ] Create routers/ directory for API route definitions
  - [ ] Create services/ directory for business logic
  - [ ] Create models/ directory for Pydantic models
  - [ ] Create utils/ directory for shared utilities
  - [ ] Create static/ directory for frontend assets
  - [ ] Create config/ directory for configuration files
  - [ ] Create research_database/ directory structure
  - [ ] Create tmp/ directory for temporary files
  - [ ] Create tests/ directory structure
- [ ] Configure environment management (AC: 3)
  - [ ] Create .env.example template with OpenAI API key
  - [ ] Implement settings.py using Pydantic BaseSettings
  - [ ] Add python-dotenv for environment variable loading
- [ ] Setup dependencies and requirements (AC: 5)
  - [ ] Create requirements.txt with minimal dependencies
  - [ ] Include FastAPI, OpenAI SDK, Pydantic v2, weasyprint
  - [ ] Add uvicorn for ASGI server
  - [ ] Add httpx for HTTP client functionality
  - [ ] Add python-markdown for markdown processing
- [ ] Create development startup configuration (AC: 6)
  - [ ] Configure uvicorn server for local development
  - [ ] Add auto-reload functionality for development
  - [ ] Document startup command for Windows 11
- [ ] Initialize __init__.py files for proper module structure (AC: 2)
  - [ ] Add __init__.py to all package directories
  - [ ] Configure proper module imports

## Dev Notes

### Previous Story Insights
This is the first story in Epic 1, establishing the foundation for the entire project.

### Project Structure Requirements
Based on [Source: architecture/unified-project-structure.md], the following directory structure must be created:

**Core Application Structure:**
- `src/main.py` - FastAPI application entry point
- `src/routers/` - API route definitions (assessment.py, research.py, reports.py)
- `src/agents/` - AI agent implementations (base_agent.py, assessment_agent.py, etc.)
- `src/services/` - Business logic services (research_database.py, agent_coordinator.py, etc.)
- `src/models/` - Pydantic models (assessment.py, collaboration.py, etc.)
- `src/utils/` - Utility functions (openai_client.py, context_manager.py, etc.)

**Frontend Structure:**
- `static/css/` - Styling files (styles.css, research_monitor.css)
- `static/js/` - JavaScript files (app.js, assessment.js, utils.js)
- `static/index.html` - Single page application

**Research Database Structure:**
- `research_database/meta/` - Metadata files (file_index.yaml, cross_references.yaml)
- `research_database/sessions/` - Per-session research directories

**Configuration:**
- `config/agent_prompts/` - Specialized agent prompts
- `config/pandoc_templates/` - Professional PDF templates
- `config/settings.py` - Application configuration

### Technology Stack Requirements
Based on [Source: architecture/tech-stack.md]:

**Core Dependencies:**
- Python 3.11+ with virtual environment (`venv_linux`)
- FastAPI 0.104+ for REST API and web interface
- OpenAI SDK 1.0+ for direct API calls
- Pydantic 2.0+ for data validation
- uvicorn 0.24+ for ASGI server
- httpx 0.25+ for HTTP client
- python-dotenv 1.0+ for environment configuration
- python-markdown 3.5+ for markdown processing

**Development Configuration:**
- Line length: 100 characters (enforced by ruff)
- Auto-reload enabled for development
- CORS configuration for local development

### Coding Standards Requirements
Based on [Source: architecture/coding-standards.md]:

**File Limits:**
- Maximum 500 lines per file
- Functions under 50 lines
- Classes under 100 lines
- Line length max 100 characters

**Style Requirements:**
- Follow PEP8 with double quotes for strings
- Type hints required for all functions
- Google-style docstrings mandatory
- Use snake_case for variables/functions, PascalCase for classes

### Environment Configuration
Based on [Source: architecture/tech-stack.md#development-environment]:

**Required Environment Variables:**
- OPENAI_API_KEY for OpenAI SDK integration
- Development server configuration
- Local Windows 11 development setup

### File Locations
**Primary Files to Create:**
- `src/main.py` - FastAPI application entry point
- `config/settings.py` - Pydantic BaseSettings configuration
- `requirements.txt` - Python dependencies
- `.env.example` - Environment variable template

**Directory Structure:** Complete directory tree as specified in unified-project-structure.md

### Testing Requirements
Based on [Source: architecture/testing-strategy.md]:

**Testing Framework:**
- Use pytest as the testing framework
- Test organization in tests/ directory with unit/, integration/, e2e/ subdirectories
- Basic health check endpoint testing required

**Test Standards:**
- Test file locations: tests/unit/, tests/integration/, tests/e2e/
- Test FastAPI application initialization
- Validate health check endpoint functionality
- Test environment configuration loading

### Technical Constraints
- Local Windows 11 development only
- No cloud deployment required
- Virtual environment must be `venv_linux`
- Minimal dependencies for MVP foundation

## Testing

**Testing Standards from Architecture:**
- **Test Framework:** pytest
- **Test File Location:** tests/ directory with subdirectories for unit/, integration/, e2e/
- **Testing Requirements for this story:**
  - Unit tests for FastAPI app initialization
  - Integration test for health check endpoint
  - Environment configuration validation tests
  - Directory structure validation tests

**Specific Test Cases:**
- Verify FastAPI application starts successfully
- Test health check endpoint returns 200 status
- Validate all required directories are created
- Test environment variable loading from .env
- Verify CORS middleware configuration

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-08-21 | 1.0 | Initial story creation | Scrum Master |
| 2025-08-21 | 1.1 | Story approved for development | Scrum Master |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results
*Results from QA Agent QA review of the completed story implementation*